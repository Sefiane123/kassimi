 {% extends "base.html" %}

{% block title %}ğŸ“„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª{% endblock %}

{% block content %}
<h2 class="text-center mb-4" style="color:#4b3b94;">ğŸ“„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª</h2>

<table class="table table-striped table-bordered table-hover align-middle text-center shadow-sm" style="background-color: #f7f9fc; border-color: #4b3b94;">
    <thead style="background-color: #d0c9f5; color: #2e1f7f; font-weight: 600;">
        <tr>
            <th>ID</th>
            <th>Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</th>
            <th>Ø§Ù„Ù…ÙØµØ¯Ø±</th>
            <th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ</th>
            <th>Ù…Ù†</th>
            <th>Ø¥Ù„Ù‰</th>
            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
    </thead>
    <tbody>
        {% for cert in certificates %}
        <tr style="color: #2e2b5f;">
            <td>{{ cert[0] }}</td>
            <td class="text-break">{{ cert[1] }}</td>
            <td class="text-break">{{ cert[2] }}</td>
            <td class="text-break">{{ cert[3] }}</td>
            <td>{{ cert[4] }}</td>
            <td>{{ cert[5] }}</td>
            <td>
                {% if cert[9] == 'revoked' %}
                    <span class="fw-bold" style="color: #c82333;">âŒ Ù…Ù„ØºØ§Ø©</span>
                {% elif cert[9] == 'expired' %}
                    <span class="fw-bold" style="color: #e0a800;">âŒ› Ù…Ù†ØªÙ‡ÙŠØ©</span>
                {% else %}
                    <span class="fw-bold" style="color: #28a745;">âœ… ÙØ¹Ø§Ù„Ø©</span>
                {% endif %}
            </td>
            <td>
                {% if session.get('user_email') == cert[6] %}
                    <form method="POST" action="{{ url_for('delete_certificate', cert_id=cert[0]) }}" style="display:inline;" onsubmit="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ÙØ¹Ù„Ø§ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©ØŸ');">
                        <button type="submit" class="btn btn-sm btn-danger">ğŸ—‘ Ø­Ø°Ù</button>
                    </form>
                    {% if cert[9] != 'revoked' %}
                    <form method="POST" action="{{ url_for('revoke_certificate', cert_id=cert[7]) }}" style="display:inline;" onsubmit="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©ØŸ');">
                        <button type="submit" class="btn btn-sm btn-warning">ğŸš« Ø¥Ù„ØºØ§Ø¡</button>
                    </form>
                    {% endif %}
                {% else %}
                    -
                {% endif %}
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="8" class="text-center text-muted">Ù…Ø§ÙƒØ§ÙŠÙ† Ø­ØªÙ‰ Ø´Ù‡Ø§Ø¯Ø©.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
